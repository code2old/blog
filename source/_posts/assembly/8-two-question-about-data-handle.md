---
title: 汇编语言-数据处理的两个基本问题
data: 2020-08-12 21:50:00
updated: 2020-08-12 21:50:00
tags:
  - 汇编
categories: 
  - 汇编语言学习
---

### 第八章 数据处理的两个基本问题

计算机处理数据的两个基本问题：

* 处理的数据在什么地方？
* 要处理的数据有多长？

机器指令必须给这两个问题以说明，否则机器就无法工作。

#### bx、si、di、bp

* 在8086CPU中，只有这4个寄存器可以用在`[...]`中来进行内存单元的寻址。
* 在`[...]`中，这4个寄存器可以单个出现，或只能以四种组合出现：bx和si、bx和di，bp和si、bp和di。
* 只要在`[...]`中使用寄存器bp，而指令中没有显性的给出段地址，段地址就默认在ss中

#### 机器指令处理的数据所在位置

处理数据的指令大致可分为三类：读取、写入、运算。在机器指令这一层来讲，并不关心数据的值是多少，而关心指令执行前一刻，它将要处理的数据所在的位置。指令执行前，索要处理的数据可以在三个地方：CPU内部、内存、端口

#### 汇编语言中数据位置的表达

汇编语言中用三个概念来表达数据的位置。

**立即数(idata)**

对于直接包含在机器指令中的数据(执行前在CPU的指令缓冲器中)，在汇编语言中称为：立即数(idata)，在汇编指令中直接给出。

**寄存器**

指令要处理的数据在寄存器中，在汇编指令中给出相应的寄存器名。

**段地址(SA)和偏移地址(EA)**

指令要处理的数据在内存中，在汇编指令中可用`[X]`的格式各处EA，SA在某个段寄存器中。

#### 寻址方式

8086 CPU有多种寻址方式，总结如下：

![寻址方式](../images/assembly_8_2.png)

#### 指令要处理的数据有多长？

8086 CPU的指令可以处理两种长度的数据，byte和word。所以机器指令中要指明进行的是字操作还是字节操作。

* 通过寄存器名指明要处理的数据尺寸
* 在没有寄存器名存在的情况下，用操作符 X ptr指明内存单元的长度，X在汇编指令中可以为word或byte
* 其他方法，比如：push指令只进行字操作

#### 寻址方式的综合应用

#### div指令

div是除法指令，使用div做除法的时候：

* 除数：有8位和16位两种，在一个寄存器或内存单元中
* 被除数：默认放在AX或DX和AX中，如果除数为8位，被除数则为16位，默认在AX中存放；如果除数为16位，被除数则为32位，在DX和AX中存放，DX存放高16位，AX存放低16位
* 结果：如果除数为8位，则AL存储除法操作的商，AH存储除法操作的余数；如果除数为16位，则AX存储除法操作的商，DX存储除法操作的余数

```
div byte ptr ds:[0]
```
含义为：
`(al)=(ax)/((ds)*16+0)` 的商
`(ah)=(ax)/((ds)*16+0)` 的余数

```
div word ptr es:[0]
```
含义为：
`(ax)=[(ds)*10000H+(ax)]/((es)*16+0)` 的商
`(dx)=[(ds)*10000H+(ax)]/((es)*16+0)` 的余数

```
div byte ptr [bx+si+8]
```
含义为：
`(al)=(ax)/((ds)*16+bx+si+8)` 的商
`(ah)=(ax)/((ds)*16+bx+si+8)` 的余数

```
div word ptr [bx+si+8]
```
含义为：
`(ax)=[(ds)*10000H+(ax)]/((ds)*16+bx+si+8)` 的商
`(dx)=[(ds)*10000H+(ax)]/((ds)*16+bx+si+8)` 的余数

#### 伪指令dd

前面用db和dw定义字节型数据和字型数据。dd是用来定义dword(double word，双字)型数据的。

#### dup

dup是一个操作符，在汇编语言中同db、dw、dd等一样，也是由编译器识别处理的符号。它是和db、dw、dd等数据定义伪指令配合使用的，用来进行数据的重复。

`db 3 dup (0)`相当于`db 0,0,0`
`db 3 dup (0, 1, 2)`相当于`db 0, 1, 2, 0, 1, 2, 0, 1, 2`
`db 3 dup ('abc', 'ABC')`相当于`db 'abcABCabcABCabcABC'`

dup的使用格式如下：

* db 重复的次数 dup (重复的字节型数据)
* dw 重复的次数 dup (重复的字型数据)
* dd 重复的次数 dup (重复的双字型数据)

#### 寻址方式在结构化数据访问中的应用
