---
title: 汇编语言-第一个程序
tags:
  - 汇编
categories:  
  - 汇编语言学习
---

### 第四章 第1个程序

#### 4.1 一个源程序从写出到执行的过程

一个汇编语言程序从写出到最终执行的简要过程如下：

* 第一步 编写汇编源程序，这一步工作的结果是产生了一个存储源程序的文本文件
* 第二步 对源程序进行编译链接，使用编译程序对源文件编译，产生目标文件；再用连接程序对目标文件进行链接，生成可在操作系统中运行的可执行文件。可执行文件中包含两部分内容
    * 程序和数据
    * 相关的描述信息
* 第三步 执行可执行文件中的程序

#### 4.2 源程序

程序4.1

```
assume cs:codesg

codesg segment

start: mov ax, 0123H
       mov bx, 0456H
       add ax, bx
       add ax, ax

       mov ax, 4c00H
       int 21H

codesg ends

end
```

在汇编语言中，包含两种指令：汇编指令和伪指令。汇编指令是有对应的机器码的指令，最终为CPU所执行。而伪指令没有对应的机器指令，最终不被CPU所执行，而是由编译器根据伪指令来进行相关的编译工作。

（1）segment和ends是一对成对使用的伪指令，这是在写可被编译器编译的汇编程序时，必须要用到的一对伪指令。segment和ends的功能是定义一个段，segment说明一个段开始，end说明一个段结束。一个段必须有一个名称来标识。格式如下：

```
# 其中XXX为段名
XXX segment     ; 定义一个段，段名为XXX，这个段从此开始
XXX ends        ; 名称为XXX的段到此结束
```

一个汇编程序是由多个段组成的，这些段被用来存放代码、数据或当作栈空间来使用。一个源程序中所有将被计算机所处理的信息：指令、数据、栈被划分到了不同的段中

一个有意义的汇编程序中至少要有一个段，这个段用来存放代码

（2）end是一个汇编程序的结束标记。如果碰到了伪指令end，就结束对源程序的编译。所以程序结尾处要加上伪指令end，否则编译器无法知道程序何时结束 

（3）assume这条伪指令的含义为“假设”，它假设某一段寄存器和程序中的某一个用segment...ends定义的段相关联。

| 目的 | 相关指令 | 指令性质 | 指令执行者 |
| ------ | ------ | ------ | ------ |
| 通知编译器一个段结束 | 段名ends | 伪指令 | 编译时，由编译器执行 |
| 通知编译器程序结束   | end      | 伪指令 | 编译时，由编译器执行|
| 程序返回            | mov ax, 4c00H int 21H | 汇编指令 | 执行时，由CPU执行|




